### Нагрузочное тестирование DynamicArray 

В тестировании принимали участии следующие имплементации интерфейса `DynamicArray`:
* `SingleArray`
* `VectorArray` с длиной приращения массива 2 и 2 <sup>16</sup>;
* `FactorArray` с фактором роста 2;
* `MartixArray` с длиной ряда 2 и 2 <sup>16</sup>;
* `StdVectorArray`, построненной с использованием `std::vector` из стандартной библиотеки С++.

Тестировались методы:
* Добавление в начало и хвост массива (`AddFront` и `AddBack`) ;
* Удаление из начала и хвоста массива (`RemoveFront` и `RemoveBack`);
* Извлечение данных из середины массива (`Get`).

Размеры массива:
* 2
* 2 <sup>4</sup>
* 2 <sup>8</sup>
* 2 <sup>12</sup>
* 2 <sup>16</sup>
* 2 <sup>18</sup>

#### `AddBack`
Операция добавления элемента в конец массива у оптимизированных имплементаций `DynamicArray` имеет порядок роста O(1). 
Лучшую производительность демонстрируют `StdVectorArray` и `FactorArray`, а также `MatrixArray` и `SpaceArray` с большой длиной ряда. В свободное место в хвосте массива данные добавляются за O(1), реаллокации случаются редко и не играют значительной роли. В имплементации `SingleArray`, где реаллокации и копирование случаются значительно чаще, наблюдается асимптотика O(N<sup>2</sup>).
![AddBack](https://github.com/vitalyisaev2/algo-2019-04/blob/master/02_data_structures/report/AddBack.png)

#### `AddFront`
Операция добавления в начало массив дорогая, поскольку требует смещения (копирования) всего массива вправо. Почти у всех имплементаций наблюдается асимптотика O(N<sup>2</sup>). Исключение составляет `SpaceArray`, который демонстрирует асимптотику O(1) в случае, если количество добавляемых данных не превышает ёмкости одного "ряда" SpaceArray.
![AddFront](https://github.com/vitalyisaev2/algo-2019-04/blob/master/02_data_structures/report/AddFront.png)

#### `RemoveBack`
Операция удаления из хвоста массива почти у всех имплементаций выполняется за O(1). Лишь у `SingleArray` и `SpaceArray` с малой длиной ряда, в связи с необходимостью реаллокации почти при каждом шаге, вычислительная сложность достигает O(N<sup>2</sup>).
![RemoveBack](https://github.com/vitalyisaev2/algo-2019-04/blob/master/02_data_structures/report/RemoveBack.png)

#### `RemoveFront`
Удаление из начала массива примерно так же дорого, как и запись в начало массива. Для различных вариантов нагрузки победители разные. Для небольших массивов (< 10000 элементов) лучшие результаты демонстрирует `StdVectorArray`, причём работает он примерно на порядок быстрее `FactorArray`, что говорит о наличии определённых оптимизаций в `std::vector`. Возможно,
при удалении из начала массива какое-то время продолжает переиспользоваться старый участок памяти, реаллокации не происходит. Для более крупных массивов лучшую асимптотику демонстрирует `SpaceArray` с большой длиной внутренних массивов.
![RemoveFront](https://github.com/vitalyisaev2/algo-2019-04/blob/master/02_data_structures/report/RemoveFront.png)

#### `Get`
Извлечение элемента массива по индексу - операция, выполняющаяся у большинства имплементаций за константное время. У `MatrixArray` она 
выполняется несколько медленнее, чем у других, за счёт большего количества арифметических операций для вычисления адреса ячейки. 
В `SpaceArray` асимптотика явно нелинейная, из-за того, что при вычислении ячейки памяти, в которой хранится нужный элемент,
требуется проитерироваться по некоторому количеству внутренних рядов, так как какждый из них может иметь разную степень заполнения.
![Get](https://github.com/vitalyisaev2/algo-2019-04/blob/master/02_data_structures/report/Get.png)

### Выводы
Самая быстрая из собственных имплементаций `DynamicArray` - `FactorArray` не слишком сильно отстаёт от `StdVectorArray`, базирующейся на `std::vector`, и везде демонстрирует нужную асимптотику. Тем не менее, это отставание есть почти всегда, что косвенно указывает на оптимизации внутри стандартной библиотеки С++ (либо какие-то эвристики, либо ассемблерные вставки, либо что-то ещё). Весьма интересны варианты `MatrixArray` и `SpaceArray`, которые могут найти применение в специфичных областях благодаря оптимизациям в работе с памятью и количестве копирований.


Таблица математических ожиданий времени выполнения операций различных имплементаций `DynamicArray`.
```
AddFront
type    FactorArray<int>()  MatrixArray<int>(2)  MatrixArray<int>(65536)  SingleArray<int>()  SpaceArray<int>(2)  SpaceArray<int>(65536)  StdVectorArray<int>()  VectorArray<int>(2)  VectorArray<int>(65536)
n                                                                                                                                                                                                            
2             18445.018270         1.519646e+05             19361.190870        39892.134670         5121.937000              9561.11089            7554.319281         28338.221470             17883.020390
16            18235.693680         1.490056e+05             18621.726710        24945.640460         5103.097110              9722.54855            7571.738044         28649.083520             18092.046200
256           18331.355870         1.541881e+05             19498.284090        25651.875770         5142.387190              9523.62567            5093.424690         28643.146930             18696.150590
4096          20371.430850         1.957079e+05             20618.494490        28568.260610         5507.391520              9995.56226            5282.685700         44060.903034             19867.531740
65536         30581.225307         1.897197e+06             30029.733838        32230.469738        12668.083198              9660.13701           13311.927846         51734.277238             32528.651450
262144       113480.120605         7.940217e+06            101018.513526       239967.989502        30278.936518              9900.66132           32583.179265        248565.193730            101440.386377



AddBack
type    FactorArray<int>()  MatrixArray<int>(2)  MatrixArray<int>(65536)  SingleArray<int>()  SpaceArray<int>(2)  SpaceArray<int>(65536)  StdVectorArray<int>()  VectorArray<int>(2)  VectorArray<int>(65536)
n                                                                                                                                                                                                            
2                 6.974975          5868.382780                16.166318        21459.119500           52.058876               15.583585               4.912286         10697.479830               133.992384
16                6.769728          5991.517920                16.181083        21749.050780           52.224922               15.157531               6.554512         10589.620880                78.755776
256               6.647822          5977.675130                16.210684        21538.013420           53.458115               16.268462               5.418184         10603.827170                78.517361
4096              6.737011          6382.530090                16.414726        23023.557410           53.239010               15.301719               6.515928         11163.989150                80.115885
65536             7.301285         13204.386479                16.641224        33919.215773           51.694406               15.193255               6.590422         19115.478546                96.106077
262144            7.499814         31981.199741                16.635377       131788.550258           51.935049               15.471905               6.627113         55843.514800                84.430551



RemoveFront
type    FactorArray<int>()  MatrixArray<int>(2)  MatrixArray<int>(65536)  SingleArray<int>()  SpaceArray<int>(2)  SpaceArray<int>(65536)  StdVectorArray<int>()  VectorArray<int>(2)  VectorArray<int>(65536)
n                                                                                                                                                                                                            
2               439.487978         5.946217e+02               472.126109          427.138288          492.423908              422.429943             404.161112           427.580455               404.501153
16              457.898606         1.019868e+03               495.410556          431.954416          500.100456              421.770043             402.670231           447.771562               410.549536
256             678.623000         8.321974e+03               716.699842          534.647473          645.959051              530.931846             423.557670           635.914263               517.702907
4096           3920.109843         1.180537e+05              3977.080202         2096.535833         2914.139316             2132.518395             588.140133          3899.717109              2095.717266
65536         57583.907354         1.864134e+06             27401.470842        28776.053794        65729.048400              498.355658            6473.037478         56264.346190             56472.900718
262144       232188.129665         7.589570e+06            111882.844715       108977.082514       156537.231606              516.656464           29894.966564        214181.857274            236027.092904



RemoveBack
type    FactorArray<int>()  MatrixArray<int>(2)  MatrixArray<int>(65536)  SingleArray<int>()  SpaceArray<int>(2)  SpaceArray<int>(65536)  StdVectorArray<int>()  VectorArray<int>(2)  VectorArray<int>(65536)
n                                                                                                                                                                                                            
2               442.546885           474.465948               473.400146          432.711988        4.268938e+02              426.914100             411.278641           403.079259               402.748843
16              413.985027           474.210018               447.010845          437.816507        4.910065e+02              429.449688             400.630563           408.126598               404.674131
256             407.919606           478.393606               452.836487          592.328178        1.597308e+03              432.346678             402.234888           400.917869               406.440516
4096            413.745688           483.802815               453.768945         2728.662408        2.047389e+04              427.815446             405.002973           406.175459               402.137716
65536           413.138469           481.396214               447.716333        27681.634339        3.230688e+05              430.895843             399.116708           389.931719               403.542223
262144          408.145884           486.854384               446.661588       126041.182726        1.627066e+06              454.524875             399.237926           402.040524               402.698337



Get
type    FactorArray<int>()  MatrixArray<int>(2)  MatrixArray<int>(65536)  SingleArray<int>()  SpaceArray<int>(2)  SpaceArray<int>(65536)  StdVectorArray<int>()  VectorArray<int>(2)  VectorArray<int>(65536)
n                                                                                                                                                                                                            
2                 1.631304            17.695781                17.530876            1.602037            9.063890                9.001525               1.937643             1.492974                 1.442995
16                1.624107            17.653130                17.973007            1.603263           26.183653                8.987399               1.945988             1.505609                 1.549550
256               1.628773            17.826216                17.750939            1.616068          288.843147                9.056345               1.932189             1.616532                 1.594152
4096              1.616769            17.972844                17.811378            1.608608         4911.597019                8.945369               1.938135             1.609551                 1.593787
65536             1.629633            17.991448                17.899311            1.661465        81383.537344                8.992288               1.934943             1.611995                 1.598223
262144            1.641791            17.740686                17.762466            1.452038       342831.114243               18.169414               1.928568             1.602122                 1.612716
```
